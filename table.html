<!DOCTYPE html>
<html>

<head>
    <title>Calendar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        #calendar {
            display: flex;
            flex-wrap: wrap;
            /* max-width: 800px; */
            margin: 0 auto;
            /* background-color: #f8f8f8; */
            padding: 20px;
        }

        .calendar-row {
            flex-basis: 25%;
            margin-bottom: 20px;
        }

        table {
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
            font-family: 'Open Sans', sans-serif;
            font-size: 14px;
            width: 80%;
            margin-left: auto;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            margin: auto;
            padding: 5px;
        }

        thead th {
            padding: 10px;
            background-color: #f5f5f5;
            font-weight: 600;
        }

        tbody td {
            padding: 10px;
            text-align: center;
        }

        tbody td.selected {
            background-color: #6ab04c;
            color: #fff;
            font-weight: 600;
        }

        caption {
            margin-bottom: 10px;
            font-weight: 600;
        }

        .group {
            display: flex;
            justify-content: space-between;
        }

        /* caption {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: left;
            font-size: 16px;
            text-transform: uppercase;
            color: #333;
            padding: 10px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #ddd;
        } */

        /* th,
        td {
            padding: 10px;
            text-align: center;
            vertical-align: middle;
        } */

        /* th {
            background-color: #f5f5f5;
            color: #333;
            font-weight: bold;
            text-transform: uppercase;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        } */

        /* td {
            border: none;
            border-bottom: 1px solid #ddd;
        } */

        /* td.selected {
            background-color: #9fc5e8;
            color: #fff;
            font-weight: bold;
        } */

        td:hover {
            background-color: #f5f5f5;
        }
    </style>

</head>

<body>

    <div id="calendar"></div>
    <!-- Button trigger modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        $(function () {
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const $calendar = $('#calendar');
            let startDate = null;
            let endDate = null;

            // Create calendar
            for (let i = 0; i < 12; i += 4) {
                const $row = $('<div>').addClass('calendar-row').appendTo($calendar);

                for (let j = 0; j < 4; j++) {
                    const month = i + j;
                    const $table = $('<table>').appendTo($row);

                    $('<thead>').append(
                        $('<tr>').append(['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => $('<th>').text(day)))
                    ).appendTo($table);

                    const $tbody = $('<tbody>').appendTo($table);

                    function fillDates(year, month) {
                        $tbody.empty();
                        const firstDay = new Date(year, month, 1).getDay();
                        const lastDate = new Date(year, month + 1, 0).getDate();

                        let date = 1;
                        for (let row = 0; row < 6; row++) {
                            const $tr = $('<tr>').appendTo($tbody);

                            for (let col = 0; col < 7; col++) {
                                const $td = $('<td>').appendTo($tr);

                                if (row === 0 && col < firstDay || date > lastDate) {
                                    $td.text('');
                                } else {
                                    $td.text(date).toggleClass('selected', year === currentYear && month === currentDate.getMonth() && date === currentDate.getDate());
                                    date++;
                                }
                            }
                        }
                    }

                    fillDates(currentYear, month);

                    $('<caption>').text(`${months[month]} ${currentYear}`).appendTo($table);

                    // Add click listener to each cell
                    $table.on('click', 'td', function () {
                        const $cell = $(this);
                        const cellText = $cell.text();

                        // Check if the clicked cell is empty or already selected
                        if (!cellText || $cell.hasClass('selected')) {
                            return;
                        }

                        // If start date is not selected yet, set it as the clicked cell
                        if (!startDate) {
                            startDate = new Date(currentYear, month, cellText);
                            $cell.addClass('selected');
                        }
                        // If end date is not selected yet, set it as the clicked cell and show popup with selected dates
                        else if (!endDate) {
                            endDate = new Date(currentYear, month, cellText);
                            $cell.addClass('selected');

                            // Show popup with selected dates
                            const $popup = $('#exampleModal').modal('show');

                        }

                    });
                }
            }
        })


    </script

</body>

</html>